---
/* No necesitas declarar el script de HubSpot como client:load */
---

<style>
    /* Estilos para el botón de llamada a la acción */
#openPopup {
    display: inline-block; /* Hace que el botón respete su contenido */
    padding: 15px 20px; /* Añade relleno al botón */
    /* background: linear-gradient(90deg, #613b91, #714ebf);
    box-shadow: 0 0 20px rgba(129, 88, 191, 0.771); */
    border: 2px solid #ffffff; /* Define el borde con color azul */
    color: #ffffff; /* Color del texto */
    /* color: aliceblue; */
    text-decoration: none; /* Elimina el subrayado del enlace */
    font-weight: bold; /* Hace que el texto sea negrita */
    border-radius: 10px; /* Redondea las esquinas del botón */
    transition: background 0.3s; /* Agrega una transición suave al fondo */
    font-size: 1rem;
    background-color: transparent;
    /* position: relative;
    border: 2px solid #318aac; */
    outline: 1px solid;
    outline-color: rgba(49, 138, 172, 0.4);
    transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);
}

/* Cambio de color cuando el botón es pasado por encima */
#openPopup:hover {
    /* background: #840eeb; Cambia el fondo a azul */
    box-shadow: inset 0 0 20px rgba(49, 138, 172, 0.5), 0 0 20px rgba(49, 138, 172, 0.4);
    outline-color: rgba(49, 138, 172, 0);
    outline-offset: 80px;
    text-shadow: 1px 1px 6px #fff;
}
.popup-container {
    color: black;
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    padding-top: 3%;
    padding-bottom: 10px;
    z-index: 9999; /* Asegura que el popup esté por encima de otros elementos */
}
.popup {
    background: white;
    padding: 10px;
    border-radius: 8px;
    width: 80%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin: 0 auto;
    z-index: 10000; /* Asegura que el contenido del popup esté encima del fondo */
}
.close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
    font-size: 20px;
    z-index: 10001; /* Asegura que el botón de cerrar esté por encima del contenido */
}
.modal-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 9999; /* Asegura que el modal esté por encima de otros elementos */
}
.modal {
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    z-index: 10000; /* Asegura que el contenido del modal esté encima del fondo */
}
</style>

<a href="#" id="openPopup">IMPLEMENTAR EN MI CONSULTORIO</a>

<div class="popup-container" id="popupContainer">
<div class="popup">
    <span class="close-btn" id="closePopup">&times;</span>
    <h2>Formulario</h2>

    <!-- Este script no necesita client:load -->
    <script
      charset="utf-8"
      type="text/javascript"
      src="//js.hsforms.net/forms/embed/v2.js"
    ></script>

    <script client:load>
      document.addEventListener("DOMContentLoaded", function () {
          function loadHubSpotForm() {
              if (window.hbspt) {
                  hbspt.forms.create({
                      portalId: "2811609",
                      formId: "5fbd9c86-9ead-44e0-9ed0-8e75ad54b1d2",
                      region: "na1",
                      onFormSubmit: function() {
                          document.getElementById('modalContainer').style.display = 'flex';
                          setTimeout(function() {
                              document.getElementById('modalContainer').style.display = 'none';
                              document.getElementById('popupContainer').style.display = 'none';
                          }, 2000);
                      }
                  });
              } else {
                  setTimeout(loadHubSpotForm, 100); // Reintenta cada 100ms hasta que hbspt esté disponible
              }
          }
  
          loadHubSpotForm(); // Llama a la función cuando se cargue la página
      });
    </script>
</div>
</div>

<div class="modal-container" id="modalContainer">
<div class="modal">
    <p>Formulario enviado con éxito</p>
</div>
</div>

<!-- Aquí se usa client:load para los scripts que interactúan con el DOM -->
<script client:load>
document.getElementById('openPopup').addEventListener('click', function() {
  document.getElementById('popupContainer').style.display = 'flex';
});
document.getElementById('closePopup').addEventListener('click', function() {
  document.getElementById('popupContainer').style.display = 'none';
});
</script>
